<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NexusTube</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'galaxy-dark': '#4B0082',
            'galaxy-light': '#E6E6FA',
            'galaxy-purple': '#9370DB',
            'galaxy-blue': '#6A5ACD',
          },
          backgroundImage: {
            'galaxy-gradient': 'linear-gradient(45deg, #9370DB, #6A5ACD)',
          },
        },
      },
    };
  </script>
</head>
<body className="bg-galaxy-dark text-galaxy-light">
  <div id="root"></div>

  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.6/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useContext, createContext, useEffect, useRef } = React;

    // Context for app state
    const AppContext = createContext();

    const AppProvider = ({ children }) => {
      const [user, setUser] = useState(null);
      const [videos, setVideos] = useState([]);
      const [communityPosts, setCommunityPosts] = useState([]);
      const [notifications, setNotifications] = useState([]);
      const [likedVideos, setLikedVideos] = useState([]);
      const [playlists, setPlaylists] = useState([]);
      const [subscriptions, setSubscriptions] = useState([]);
      const [channelSettings, setChannelSettings] = useState({
        banner: 'https://via.placeholder.com/1500x420.png?text=Galaxy+Banner',
        logo: 'https://via.placeholder.com/80.png?text=Logo',
        channelName: '',
        youtubeLink: '',
        instagramLink: '',
        tiktokLink: '',
        subscribers: 1000, // Mock data
        watchtime: 1800 // Mock data (hours)
      });

      return (
        <AppContext.Provider value={{ 
          user, setUser, videos, setVideos, communityPosts, setCommunityPosts,
          notifications, setNotifications, likedVideos, setLikedVideos,
          playlists, setPlaylists, subscriptions, setSubscriptions,
          channelSettings, setChannelSettings
        }}>
          {children}
        </AppContext.Provider>
      );
    };

    // Icons
    const BellIcon = ({ count }) => (
      <div className="relative">
        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
        </svg>
        {count > 0 && (
          <span className="absolute -top-2 -right-2 bg-red-600 text-xs rounded-full w-5 h-5 flex items-center justify-center">
            {count}
          </span>
        )}
      </div>
    );

    const UploadIcon = () => (
      <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
      </svg>
    );

    const LikeIcon = ({ liked }) => (
      <svg className={`w-6 h-6 ${liked ? 'fill-galaxy-purple' : 'fill-none'}`} stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2" />
      </svg>
    );

    const ShareIcon = () => (
      <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
      </svg>
    );

    const MenuIcon = () => (
      <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
      </svg>
    );

    const CameraIcon = () => (
      <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" />
        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg>
    );

    // Video Modal Component
    const VideoModal = ({ video, onClose }) => {
      return (
        <div className="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50">
          <div className="w-full h-full max-w-7xl">
            <div className="relative w-full h-full">
              <button
                onClick={onClose}
                className="absolute top-4 right-4 bg-galaxy-dark text-galaxy-light p-2 rounded-full hover:bg-galaxy-purple transition-all"
              >
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
              <video 
                src={video.url} 
                controls 
                autoPlay 
                className="w-full h-full object-contain"
              ></video>
            </div>
          </div>
        </div>
      );
    };

    // Navbar Component
    const Navbar = () => {
      const { user, setUser, notifications, videos } = useContext(AppContext);
      const [showLogin, setShowLogin] = useState(false);
      const [showDropdown, setShowDropdown] = useState(false);
      const [showNotifications, setShowNotifications] = useState(false);
      const [searchQuery, setSearchQuery] = useState('');

      const handleLogin = (e) => {
        e.preventDefault();
        setUser({ username, id: 'user1' });
        setShowLogin(false);
        setUsername('');
        setPassword('');
      };

      const handleLogout = () => {
        setUser(null);
        setShowDropdown(false);
      };

      const handleSearch = (e) => {
        setSearchQuery(e.target.value);
      };

      const filteredVideos = videos.filter(video => 
        video.title.toLowerCase().includes(searchQuery.toLowerCase())
      );

      const [username, setUsername] = useState('');
      const [password, setPassword] = useState('');

      return (
        <nav className="fixed top-0 w-full bg-galaxy-dark flex items-center justify-between p-4 border-b border-galaxy-blue z-10">
          <div className="flex items-center space-x-2">
            <span className="text-2xl">üåå</span>
            <span className="text-xl font-bold">NexusTube</span>
          </div>
          <div className="flex-1 max-w-xl mx-4">
            <div className="flex items-center bg-galaxy-blue rounded-full px-4 py-2 transition-all duration-300">
              <input 
                type="text" 
                placeholder="Search" 
                value={searchQuery}
                onChange={handleSearch}
                className="bg-transparent w-full outline-none text-galaxy-light" 
              />
              <svg className="w-5 h-5 text-galaxy-light" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
              </svg>
            </div>
            {searchQuery && (
              <div className="absolute top-16 bg-galaxy-blue rounded-lg shadow-lg w-[calc(100%-2rem)] max-w-xl mx-4 max-h-64 overflow-y-auto">
                {filteredVideos.length > 0 ? (
                  filteredVideos.map((video, i) => (
                    <a 
                      key={i} 
                      href={`#video/${video.id}`} 
                      className="block px-4 py-2 hover:bg-galaxy-purple text-galaxy-light"
                    >
                      {video.title}
                    </a>
                  ))
                ) : (
                  <p className="px-4 py-2 text-galaxy-light opacity-80">Keine Ergebnisse gefunden</p>
                )}
              </div>
            )}
          </div>
          <div className="flex items-center space-x-4">
            <button 
              onClick={() => window.location.hash = '#upload-video'}
              className="hover:text-galaxy-purple"
            >
              <UploadIcon />
            </button>
            <div className="relative">
              <button 
                onClick={() => setShowNotifications(!showNotifications)}
                className="hover:text-galaxy-purple"
              >
                <BellIcon count={notifications.length} />
              </button>
              {showNotifications && (
                <div className="absolute right-0 mt-2 w-64 bg-galaxy-blue rounded-lg shadow-lg py-2 max-h-64 overflow-y-auto">
                  {notifications.length > 0 ? (
                    notifications.map((notification, i) => (
                      <div key={i} className="px-4 py-2 hover:bg-galaxy-purple text-galaxy-light">
                        <p className="text-sm">{notification.message}</p>
                        <p className="text-xs opacity-80">{notification.time}</p>
                      </div>
                    ))
                  ) : (
                    <p className="px-4 py-2 text-galaxy-light opacity-80">Keine Benachrichtigungen</p>
                  )}
                </div>
              )}
            </div>
            {user ? (
              <div className="relative">
                <div
                  className="w-8 h-8 bg-galaxy-blue rounded-full flex items-center justify-center cursor-pointer"
                  onClick={() => setShowDropdown(!showDropdown)}
                >
                  {user.username[0].toUpperCase()}
                </div>
                {showDropdown && (
                  <div className="absolute right-0 mt-2 w-48 bg-galaxy-blue rounded-lg shadow-lg py-2">
                    <a href="#channel" className="block px-4 py-2 hover:bg-galaxy-purple text-galaxy-light">Mein Kanal</a>
                    <a href="#dashboard" className="block px-4 py-2 hover:bg-galaxy-purple text-galaxy-light">Dashboard</a>
                    <button onClick={handleLogout} className="block w-full text-left px-4 py-2 hover:bg-galaxy-purple text-galaxy-light">Abmelden</button>
                  </div>
                )}
              </div>
            ) : (
              <button
                onClick={() => setShowLogin(true)}
                className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all"
              >
                Anmelden
              </button>
            )}
          </div>
          {showLogin && (
            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20">
              <div className="bg-galaxy-blue p-6 rounded-lg w-96">
                <h2 className="text-xl font-bold mb-4 text-galaxy-light">Anmelden</h2>
                <form onSubmit={handleLogin}>
                  <div className="mb-4">
                    <label className="block text-sm mb-1 text-galaxy-light">Benutzername</label>
                    <input
                      type="text"
                      value={username}
                      onChange={(e) => setUsername(e.target.value)}
                      className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                      required
                    />
                  </div>
                  <div className="mb-4">
                    <label className="block text-sm mb-1 text-galaxy-light">Passwort</label>
                    <input
                      type="password"
                      value={password}
                      onChange={(e) => setPassword(e.target.value)}
                      className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                      required
                    />
                  </div>
                  <div className="flex justify-end space-x-2">
                    <button
                      type="button"
                      onClick={() => setShowLogin(false)}
                      className="px-4 py-2 bg-galaxy-dark rounded-lg hover:bg-galaxy-purple text-galaxy-light"
                    >
                      Abbrechen
                    </button>
                    <button
                      type="submit"
                      className="px-4 py-2 bg-galaxy-gradient rounded-lg hover:opacity-80 text-galaxy-light"
                    >
                      Anmelden
                    </button>
                  </div>
                </form>
              </div>
            </div>
          )}
        </nav>
      );
    };

    // Sidebar Component
    const Sidebar = () => {
      const { subscriptions } = useContext(AppContext);
      return (
        <aside className="fixed top-16 left-0 h-full w-60 bg-galaxy-dark border-r border-galaxy-blue p-4 hidden md:block">
          <ul className="space-y-4">
            {['Home', 'Trends', 'Library', 'History', 'Your Videos', 'Dashboard', 'Community'].map((item) => (
              <li key={item} className="flex items-center space-x-2 hover:text-galaxy-purple cursor-pointer">
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
                <a href={`#${item.toLowerCase().replace(' ', '-')}`} className="text-galaxy-light">{item}</a>
              </li>
            ))}
            <li className="border-t border-galaxy-blue pt-4">
              <h3 className="text-lg font-semibold text-galaxy-light mb-2">Abonnements</h3>
              {subscriptions.map((sub, i) => (
                <a key={i} href={`#channel/${sub.id}`} className="block px-2 py-1 hover:text-galaxy-purple text-galaxy-light">
                  {sub.name}
                </a>
              ))}
            </li>
          </ul>
        </aside>
      );
    };

    // Video Card Component
    const VideoCard = ({ video, onLike, onShare, onAddToPlaylist }) => {
      const [showMenu, setShowMenu] = useState(false);
      const [newPlaylistName, setNewPlaylistName] = useState('');
      const [showModal, setShowModal] = useState(false);
      const { playlists, setPlaylists, likedVideos, user } = useContext(AppContext);

      const handleAddToPlaylist = (playlistId) => {
        setPlaylists(prev => prev.map(p => 
          p.id === playlistId ? { ...p, videos: [...p.videos, video] } : p
        ));
        setShowMenu(false);
      };

      const handleCreatePlaylist = () => {
        if (!newPlaylistName) return;
        const newPlaylist = {
          id: Date.now(),
          name: newPlaylistName,
          videos: [video]
        };
        setPlaylists(prev => [...prev, newPlaylist]);
        setNewPlaylistName('');
        setShowMenu(false);
      };

      const renderDescriptionWithLinks = (text) => {
        const urlRegex = /(https?:\/\/[^\s]+)/g;
        const parts = text.split(urlRegex);
        return parts.map((part, index) => {
          if (part.match(urlRegex)) {
            return (
              <a 
                key={index} 
                href={part} 
                target="_blank" 
                rel="noopener noreferrer" 
                className="text-galaxy-purple hover:underline"
              >
                {part}
              </a>
            );
          }
          return <span key={index}>{part}</span>;
        });
      };

      return (
        <>
          <div 
            className="space-y-2 hover:scale-105 transition-transform relative cursor-pointer"
            onClick={() => setShowModal(true)}
          >
            <img src={video.thumbnail} alt={video.title} className="w-full h-40 object-cover rounded-lg" />
            <h3 className="text-sm font-semibold text-galaxy-light">{video.title}</h3>
            <p className="text-xs text-galaxy-light opacity-80">{video.channel}</p>
            <p className="text-xs text-galaxy-light opacity-80">{video.views} ‚Ä¢ {video.time}</p>
            <p className="text-xs text-galaxy-light opacity-80">Dauer: {Math.floor(video.duration / 60)}:{(video.duration % 60).toString().padStart(2, '0')}</p>
            {video.description && (
              <p className="text-xs text-galaxy-light opacity-80">{renderDescriptionWithLinks(video.description)}</p>
            )}
            {user && (
              <div className="flex space-x-2 mt-2" onClick={e => e.stopPropagation()}>
                <button onClick={() => onLike(video)} className="flex items-center space-x-1 text-galaxy-light hover:text-galaxy-purple">
                  <LikeIcon liked={likedVideos.some(v => v.id === video.id)} />
                  <span>{video.likes || 0}</span>
                </button>
                <button onClick={() => onShare(video)} className="flex items-center space-x-1 text-galaxy-light hover:text-galaxy-purple">
                  <ShareIcon />
                  <span>Teilen</span>
                </button>
                <div className="relative">
                  <button onClick={() => setShowMenu(!showMenu)} className="text-galaxy-light hover:text-galaxy-purple">
                    <MenuIcon />
                  </button>
                  {showMenu && (
                    <div className="absolute right-0 mt-2 w-48 bg-galaxy-blue rounded-lg shadow-lg py-2 z-10">
                      <div className="px-4 py-2">
                        <input
                          type="text"
                          value={newPlaylistName}
                          onChange={(e) => setNewPlaylistName(e.target.value)}
                          placeholder="Neue Playlist"
                          className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light"
                        />
                        <button
                          onClick={handleCreatePlaylist}
                          className="mt-2 w-full bg-galaxy-gradient text-galaxy-light px-2 py-1 rounded-lg hover:opacity-80"
                        >
                          Erstellen
                        </button>
                      </div>
                      {playlists.map(playlist => (
                        <button
                          key={playlist.id}
                          onClick={() => handleAddToPlaylist(playlist.id)}
                          className="block w-full text-left px-4 py-2 hover:bg-galaxy-purple text-galaxy-light"
                        >
                          {playlist.name}
                        </button>
                      ))}
                    </div>
                  )}
                </div>
              </div>
            )}
          </div>
          {showModal && <VideoModal video={video} onClose={() => setShowModal(false)} />}
        </>
      );
    };

    // Homepage Component
    const Homepage = () => {
      const { videos, communityPosts, setLikedVideos, likedVideos, setNotifications } = useContext(AppContext);

      const handleLike = (video) => {
        setLikedVideos(prev => {
          if (prev.some(v => v.id === video.id)) {
            return prev.filter(v => v.id !== video.id);
          }
          return [...prev, { ...video, likes: (video.likes || 0) + 1 }];
        });
        setVideos(prev => prev.map(v => 
          v.id === video.id ? { ...v, likes: (v.likes || 0) + 1 } : v
        ));
      };

      const handleShare = (video) => {
        const shareUrl = `${window.location.origin}/#video/${video.id}`;
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareUrl)}`;
        navigator.clipboard.writeText(shareUrl);
        setNotifications(prev => [...prev, {
          id: Date.now(),
          message: `Link f√ºr "${video.title}" kopiert!`,
          time: new Date().toLocaleTimeString()
        }]);
        window.open(whatsappUrl, '_blank');
      };

      return (
        <div className="pt-20 md:pl-64 p-4">
          <h2 className="text-2xl font-bold mb-4 text-galaxy-light">Startseite</h2>
          <div className="space-y-8">
            <div>
              <h3 className="text-lg font-semibold text-galaxy-light mb-2">Videos</h3>
              <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                {videos.map((video, i) => (
                  <VideoCard 
                    key={i} 
                    video={video} 
                    onLike={handleLike} 
                    onShare={handleShare} 
                    onAddToPlaylist={() => {}} 
                  />
                ))}
              </div>
            </div>
            <div>
              <h3 className="text-lg font-semibold text-galaxy-light mb-2">Community Beitr√§ge</h3>
              <div className="space-y-4">
                {communityPosts.map(post => (
                  <div key={post.id} className="bg-galaxy-blue p-4 rounded-lg">
                    <div className="flex items-center space-x-2 mb-2">
                      <div className="w-8 h-8 bg-galaxy-dark rounded-full"></div>
                      <div>
                        <p className="font-semibold text-galaxy-light">{post.channel}</p>
                        <p className="text-xs text-galaxy-light opacity-80">{post.time}</p>
                      </div>
                    </div>
                    <img src={post.image} alt="Community Post" className="w-full rounded-lg mb-2" />
                    <p className="text-sm text-galaxy-light">{post.caption}</p>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      );
    };

    // Video Page Component
    const VideoPage = () => {
      const { user, notifications, setNotifications, setLikedVideos, likedVideos, subscriptions, setSubscriptions } = useContext(AppContext);
      const [notificationStatus, setNotificationStatus] = useState('none');
      const [showBellOptions, setShowBellOptions] = useState(false);
      const [comment, setComment] = useState('');
      const [comments, setComments] = useState([
        { id: 1, user: 'User1', text: 'Great video!' },
        { id: 2, user: 'User2', text: 'Love the content!' }
      ]);
      const [video] = useState({
        id: Date.now(),
        title: 'Sample Video Title',
        channel: 'NexusTube Channel',
        views: '1.2M views',
        time: '2 days ago',
        thumbnail: 'https://via.placeholder.com/320x180.png?text=Video',
        likes: 0,
        description: 'Check out my website: https://example.com',
        url: null,
        duration: 0
      });

      const handleSubscribe = () => {
        if (notificationStatus === 'none') {
          setShowBellOptions(true);
          setSubscriptions(prev => [...prev, { id: video.channel, name: video.channel }]);
        }
      };

      const handleBellOption = (option) => {
        setNotificationStatus(option);
        setShowBellOptions(false);
        if (option !== 'none' && user) {
          setNotifications(prev => [...prev, {
            id: Date.now(),
            message: `New video from ${video.channel}`,
            time: new Date().toLocaleTimeString()
          }]);
        }
      };

      const handleLike = () => {
        setLikedVideos(prev => {
          if (prev.some(v => v.id === video.id)) {
            return prev.filter(v => v.id !== video.id);
          }
          return [...prev, { ...video, likes: (video.likes || 0) + 1 }];
        });
      };

      const handleShare = () => {
        const shareUrl = `${window.location.origin}/#video/${video.id}`;
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareUrl)}`;
        navigator.clipboard.writeText(shareUrl);
        setNotifications(prev => [...prev, {
          id: Date.now(),
          message: `Link f√ºr "${video.title}" kopiert!`,
          time: new Date().toLocaleTimeString()
        }]);
        window.open(whatsappUrl, '_blank');
      };

      const handleCommentSubmit = (e) => {
        e.preventDefault();
        if (!comment.trim()) return;
        setComments(prev => [...prev, { id: Date.now(), user: user.username, text: comment }]);
        setComment('');
      };

      const renderDescriptionWithLinks = (text) => {
        const urlRegex = /(https?:\/\/[^\s]+)/g;
        const parts = text.split(urlRegex);
        return parts.map((part, index) => {
          if (part.match(urlRegex)) {
            return (
              <a 
                key={index} 
                href={part} 
                target="_blank" 
                rel="noopener noreferrer" 
                className="text-galaxy-purple hover:underline"
              >
                {part}
              </a>
            );
          }
          return <span key={index}>{part}</span>;
        });
      };

      return (
        <div className="pt-20 md:pl-64 p-4">
          <div className="max-w-5xl mx-auto">
            <div className="w-full h-96 bg-black rounded-lg mb-4"></div>
            <h1 className="text-2xl font-bold text-galaxy-light">{video.title}</h1>
            <div className="flex items-center justify-between my-2">
              <div className="flex items-center space-x-2">
                <div className="w-10 h-10 bg-galaxy-blue rounded-full"></div>
                <div>
                  <p className="font-semibold text-galaxy-light">{video.channel}</p>
                  <p className="text-xs text-galaxy-light opacity-80">100K subscribers</p>
                </div>
              </div>
              <div className="flex items-center space-x-4">
                <button onClick={handleLike} className="flex items-center space-x-1 text-galaxy-light hover:text-galaxy-purple">
                  <LikeIcon liked={likedVideos.some(v => v.id === video.id)} />
                  <span>{video.likes || 0}</span>
                </button>
                <button onClick={handleShare} className="flex items-center space-x-1 text-galaxy-light hover:text-galaxy-purple">
                  <ShareIcon />
                  <span>Teilen</span>
                </button>
                <div className="relative">
                  {notificationStatus === 'none' ? (
                    <button 
                      onClick={handleSubscribe}
                      className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all"
                    >
                      Subscribe
                    </button>
                  ) : (
                    <button 
                      onClick={() => setShowBellOptions(true)}
                      className="bg-galaxy-dark text-galaxy-light px-4 py-2 rounded-full flex items-center space-x-2 hover:bg-galaxy-purple transition-all"
                    >
                      <BellIcon />
                      <span>{notificationStatus === 'all' ? 'All' : 'Personalized'}</span>
                    </button>
                  )}
                  {showBellOptions && (
                    <div className="absolute right-0 mt-2 w-48 bg-galaxy-blue rounded-lg shadow-lg py-2 z-10">
                      <button 
                        onClick={() => handleBellOption('all')} 
                        className="block w-full text-left px-4 py-2 hover:bg-galaxy-purple text-galaxy-light"
                      >
                        All
                      </button>
                      <button 
                        onClick={() => handleBellOption('personalized')} 
                        className="block w-full text-left px-4 py-2 hover:bg-galaxy-purple text-galaxy-light"
                      >
                        Personalized
                      </button>
                      <button 
                        onClick={() => handleBellOption('none')} 
                        className="block w-full text-left px-4 py-2 hover:bg-galaxy-purple text-galaxy-light"
                      >
                        None
                      </button>
                    </div>
                  )}
                </div>
              </div>
            </div>
            <p className="text-sm text-galaxy-light opacity-80">{video.views} ‚Ä¢ {video.time}</p>
            <div className="bg-galaxy-blue p-4 rounded-lg my-4">
              <p className="text-sm text-galaxy-light">{renderDescriptionWithLinks(video.description)}</p>
            </div>
            <div className="space-y-4">
              <h2 className="text-lg font-semibold text-galaxy-light">Comments</h2>
              {user && (
                <form onSubmit={handleCommentSubmit} className="mb-4">
                  <input 
                    type="text" 
                    value={comment}
                    onChange={(e) => setComment(e.target.value)}
                    placeholder="Add a comment..." 
                    className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300" 
                  />
                </form>
              )}
              <div className="space-y-2">
                {comments.map(c => (
                  <p key={c.id} className="text-sm text-galaxy-light">
                    <span className="font-semibold">{c.user}:</span> {c.text}
                  </p>
                ))}
              </div>
            </div>
          </div>
        </div>
      );
    };

    // Upload Component
    const UploadComponent = ({ type }) => {
      const { user, setVideos, setNotifications } = useContext(AppContext);
      const [file, setFile] = useState(null);
      const [thumbnailFile, setThumbnailFile] = useState(null);
      const [title, setTitle] = useState('');
      const [description, setDescription] = useState('');
      const [hashtags, setHashtags] = useState('');
      const [tags, setTags] = useState('');
      const [isDragging, setIsDragging] = useState(false);
      const [isRecording, setIsRecording] = useState(false);
      const [recordedBlob, setRecordedBlob] = useState(null);
      const [stream, setStream] = useState(null);
      const [duration, setDuration] = useState(0);
      const videoRef = useRef(null);
      const mediaRecorderRef = useRef(null);
      const dropRef = useRef(null);

      if (!user) {
        return (
          <div className="pt-20 md:pl-64 p-4 text-center">
            <h2 className="text-xl font-bold text-galaxy-light">Bitte melde dich an, um Inhalte hochzuladen.</h2>
            <button
              onClick={() => window.location.hash = '#home'}
              className="mt-4 bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all"
            >
              Zum Login
            </button>
          </div>
        );
      }

      const handleDragEnter = (e) => {
        e.preventDefault();
        e.stopPropagation();
        setIsDragging(true);
      };

      const handleDragLeave = (e) => {
        e.preventDefault();
        e.stopPropagation();
        setIsDragging(false);
      };

      const handleDragOver = (e) => {
        e.preventDefault();
        e.stopPropagation();
      };

      const handleDrop = (e) => {
        e.preventDefault();
        e.stopPropagation();
        setIsDragging(false);
        const droppedFile = e.dataTransfer.files[0];
        if (type === 'video' && droppedFile.type.startsWith('video/')) {
          setFile(droppedFile);
          setTitle(droppedFile.name.split('.')[0]);
          setRecordedBlob(null);
          analyzeVideoDuration(droppedFile);
        } else {
          setNotifications(prev => [...prev, {
            id: Date.now(),
            message: 'Bitte lade eine g√ºltige Videodatei hoch.',
            time: new Date().toLocaleTimeString()
          }]);
        }
      };

      const handleFileChange = (e) => {
        const selectedFile = e.target.files[0];
        if (type === 'video' && selectedFile.type.startsWith('video/')) {
          setFile(selectedFile);
          setTitle(selectedFile.name.split('.')[0]);
          setRecordedBlob(null);
          analyzeVideoDuration(selectedFile);
        } else {
          setNotifications(prev => [...prev, {
            id: Date.now(),
            message: 'Bitte w√§hle eine g√ºltige Videodatei aus.',
            time: new Date().toLocaleTimeString()
          }]);
        }
      };

      const analyzeVideoDuration = (file) => {
        const video = document.createElement('video');
        video.src = URL.createObjectURL(file);
        video.onloadedmetadata = () => {
          setDuration(Math.round(video.duration));
          URL.revokeObjectURL(video.src);
        };
      };

      const startRecording = async () => {
        try {
          const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
          setStream(stream);
          videoRef.current.srcObject = stream;
          videoRef.current.play();
          setIsRecording(true);

          const recorder = new MediaRecorder(stream);
          mediaRecorderRef.current = recorder;
          const chunks = [];
          recorder.ondataavailable = (e) => chunks.push(e.data);
          recorder.onstop = () => {
            const blob = new Blob(chunks, { type: 'video/webm' });
            setRecordedBlob(blob);
            const recordedFile = new File([blob], `Recorded_Video_${Date.now()}.webm`, { type: 'video/webm' });
            setFile(recordedFile);
            setTitle(`Recorded_Video_${Date.now()}`);
            analyzeVideoDuration(recordedFile);
            stream.getTracks().forEach(track => track.stop());
            setStream(null);
          };
          recorder.start();
        } catch (err) {
          console.error('Error accessing camera:', err);
          setNotifications(prev => [...prev, {
            id: Date.now(),
            message: 'Kamerazugriff fehlgeschlagen. Bitte √ºberpr√ºfe die Berechtigungen.',
            time: new Date().toLocaleTimeString()
          }]);
        }
      };

      const stopRecording = () => {
        if (mediaRecorderRef.current) {
          mediaRecorderRef.current.stop();
          setIsRecording(false);
        }
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        if (!file || !thumbnailFile) {
          setNotifications(prev => [...prev, {
            id: Date.now(),
            message: 'Bitte lade ein Video und ein Thumbnail hoch.',
            time: new Date().toLocaleTimeString()
          }]);
          return;
        }

        const fileUrl = URL.createObjectURL(file);
        const newVideo = {
          id: Date.now(),
          title,
          description,
          hashtags: hashtags.split(',').map(tag => tag.trim()).filter(tag => tag),
          tags: tags.split(',').map(tag => tag.trim()).filter(tag => tag),
          thumbnail: URL.createObjectURL(thumbnailFile),
          channel: user.username,
          views: '0 views',
          time: 'Just now',
          analytics: { views: 0, timestamp: Date.now() },
          likes: 0,
          category: categorizeVideo(title),
          url: fileUrl,
          duration
        };
        setVideos(prev => [newVideo, ...prev]);
        setNotifications(prev => [...prev, {
          id: Date.now(),
          message: `New video uploaded: ${title} (Dauer: ${Math.floor(duration / 60)}:${(duration % 60).toString().padStart(2, '0')})`,
          time: new Date().toLocaleTimeString()
        }]);

        setFile(null);
        setThumbnailFile(null);
        setTitle('');
        setDescription('');
        setHashtags('');
        setTags('');
        setRecordedBlob(null);
        setDuration(0);
        window.location.hash = '#home';
      };

      const categorizeVideo = (title) => {
        const lowerTitle = title.toLowerCase();
        if (lowerTitle.includes('music') || lowerTitle.includes('song')) return 'Music';
        if (lowerTitle.includes('movie') || lowerTitle.includes('film')) return 'Movies';
        if (lowerTitle.includes('game') || lowerTitle.includes('gaming')) return 'Gaming';
        if (lowerTitle.includes('sport') || lowerTitle.includes('fitness')) return 'Sports';
        if (lowerTitle.includes('knowledge') || lowerTitle.includes('learn') || lowerTitle.includes('science')) return 'Knowledge';
        if (lowerTitle.includes('podcast') || lowerTitle.includes('talk')) return 'Podcasts';
        return 'Trends';
      };

      useEffect(() => {
        return () => {
          if (stream) {
            stream.getTracks().forEach(track => track.stop());
          }
        };
      }, [stream]);

      return (
        <div className="pt-20 md:pl-64 p-4 max-w-5xl mx-auto">
          <h2 className="text-2xl font-bold mb-4 text-galaxy-light">Video hochladen</h2>
          <form onSubmit={handleSubmit} className="bg-galaxy-blue p-6 rounded-lg">
            <div className="mb-4">
              <button
                type="button"
                onClick={isRecording ? stopRecording : startRecording}
                className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all flex items-center space-x-2"
              >
                <CameraIcon />
                <span>{isRecording ? 'Aufnahme stoppen' : 'Video mit Kamera aufnehmen'}</span>
              </button>
              {isRecording && (
                <video ref={videoRef} className="mt-4 w-full h-48 rounded-lg" autoPlay muted></video>
              )}
              {recordedBlob && !isRecording && (
                <video src={URL.createObjectURL(recordedBlob)} className="mt-4 w-full h-48 rounded-lg" controls></video>
              )}
            </div>
            <div 
              className={`mb-4 p-4 border-2 border-dashed rounded-lg transition-all duration-300 ${isDragging ? 'border-galaxy-purple bg-galaxy-dark' : 'border-galaxy-light'}`}
              onDragEnter={handleDragEnter}
              onDragLeave={handleDragLeave}
              onDragOver={handleDragOver}
              onDrop={handleDrop}
              ref={dropRef}
            >
              <p className="text-center text-galaxy-light">{isDragging ? 'Video hier ablegen' : 'Video per Drag & Drop oder Klick hochladen'}</p>
              <input
                type="file"
                accept="video/*"
                onChange={handleFileChange}
                className="hidden"
                id="file-upload"
              />
              <label htmlFor="file-upload" className="block text-center mt-2">
                <span className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full cursor-pointer hover:opacity-80 transition-all">
                  Video ausw√§hlen
                </span>
              </label>
              {file && (
                <p className="mt-2 text-galaxy-light text-center">Ausgew√§hlte Datei: {file.name}</p>
              )}
            </div>
            <div className="mb-4">
              <label className="block text-sm mb-1 text-galaxy-light">Thumbnail</label>
              <input
                type="file"
                accept="image/*"
                onChange={(e) => setThumbnailFile(e.target.files[0])}
                className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                required
              />
              {thumbnailFile && (
                <img src={URL.createObjectURL(thumbnailFile)} alt="Thumbnail Preview" className="mt-2 w-48 h-27 rounded-lg" />
              )}
            </div>
            <div className="mb-4">
              <label className="block text-sm mb-1 text-galaxy-light">Titel</label>
              <input
                type="text"
                value={title}
                onChange={(e) => setTitle(e.target.value)}
                className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                required
                placeholder="Video-Titel"
              />
            </div>
            <div className="mb-4">
              <label className="block text-sm mb-1 text-galaxy-light">Beschreibung</label>
              <textarea
                value={description}
                onChange={(e) => setDescription(e.target.value)}
                className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                rows="4"
                placeholder="Beschreibung (Links werden automatisch erkannt)"
              ></textarea>
            </div>
            <div className="mb-4">
              <label className="block text-sm mb-1 text-galaxy-light">Hashtags (kommagetrennt)</label>
              <input
                type="text"
                value={hashtags}
                onChange={(e) => setHashtags(e.target.value)}
                className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                placeholder="#tag1,#tag2"
              />
            </div>
            <div className="mb-4">
              <label className="block text-sm mb-1 text-galaxy-light">Tags (kommagetrennt)</label>
              <input
                type="text"
                value={tags}
                onChange={(e) => setTags(e.target.value)}
                className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                placeholder="tag1,tag2"
              />
            </div>
            <button
              type="submit"
              className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all"
              disabled={isRecording}
            >
              Hochladen
            </button>
          </form>
        </div>
      );
    };

    // Community Page Component
    const CommunityPage = () => {
      const { user, communityPosts } = useContext(AppContext);

      if (!user) {
        return (
          <div className="pt-20 md:pl-64 p-4 text-center">
            <h2 className="text-xl font-bold text-galaxy-light">Bitte melde dich an, um Community-Posts zu sehen.</h2>
          </div>
        );
      }

      return (
        <div className="pt-20 md:pl-64 p-4 max-w-5xl mx-auto">
          <h2 className="text-2xl font-bold mb-4 text-galaxy-light">Community</h2>
          <div className="space-y-4">
            {communityPosts.map(post => (
              <div key={post.id} className="bg-galaxy-blue p-4 rounded-lg">
                <div className="flex items-center space-x-2 mb-2">
                  <div className="w-8 h-8 bg-galaxy-dark rounded-full"></div>
                  <div>
                    <p className="font-semibold text-galaxy-light">{post.channel}</p>
                    <p className="text-xs text-galaxy-light opacity-80">{post.time}</p>
                  </div>
                </div>
                <img src={post.image} alt="Community Post" className="w-full rounded-lg mb-2" />
                <p className="text-sm text-galaxy-light">{post.caption}</p>
              </div>
            ))}
          </div>
        </div>
      );
    };

    // Channel Page Component
    const ChannelPage = () => {
      const { user, videos, communityPosts, channelSettings } = useContext(AppContext);
      const channelVideos = videos.filter(video => video.channel === user?.username);
      const [activeTab, setActiveTab] = useState('videos');

      if (!user) {
        return (
          <div className="pt-20 md:pl-64 p-4 text-center">
            <h2 className="text-xl font-bold text-galaxy-light">Bitte melde dich an, um deinen Kanal zu sehen.</h2>
            <button
              onClick={() => window.location.hash = '#home'}
              className="mt-4 bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all"
            >
              Zum Login
            </button>
          </div>
        );
      }

      return (
        <div className="pt-20 md:pl-64 p-4">
          <img src={channelSettings.banner} alt="Channel Banner" className="w-full h-40 object-cover mb-4" />
          <div className="max-w-5xl mx-auto">
            <div className="flex items-center space-x-4 mb-4">
              <img src={channelSettings.logo} alt="Channel Logo" className="w-20 h-20 rounded-full" />
              <div>
                <h1 className="text-2xl font-bold text-galaxy-light">{channelSettings.channelName || user?.username || 'NexusTube Channel'}</h1>
                <p className="text-sm text-galaxy-light opacity-80">@{user?.username || 'NexusTube'} ‚Ä¢ {channelVideos.length} Videos</p>
              </div>
              <button className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all">Subscribe</button>
            </div>
            <div className="flex space-x-4 mb-4">
              {channelSettings.youtubeLink && (
                <a href={channelSettings.youtubeLink} target="_blank" className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all">
                  YouTube
                </a>
              )}
              {channelSettings.instagramLink && (
                <a href={channelSettings.instagramLink} target="_blank" className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all">
                  Instagram
                </a>
              )}
              {channelSettings.tiktokLink && (
                <a href={channelSettings.tiktokLink} target="_blank" className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all">
                  TikTok
                </a>
              )}
            </div>
            <div className="flex space-x-4 border-b border-galaxy-blue mb-4">
              <button 
                onClick={() => setActiveTab('videos')}
                className={`pb-2 ${activeTab === 'videos' ? 'border-b-2 border-galaxy-purple text-galaxy-light' : 'text-galaxy-light opacity-80'}`}
              >
                Videos
              </button>
              <button 
                onClick={() => setActiveTab('community')}
                className={`pb-2 ${activeTab === 'community' ? 'border-b-2 border-galaxy-purple text-galaxy-light' : 'text-galaxy-light opacity-80'}`}
              >
                Community
              </button>
            </div>
            {activeTab === 'videos' && (
              <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                {channelVideos.map((video, i) => (
                  <VideoCard 
                    key={i} 
                    video={video} 
                    onLike={() => {}} 
                    onShare={() => {}} 
                    onAddToPlaylist={() => {}} 
                  />
                ))}
              </div>
            )}
            {activeTab === 'community' && (
              <div className="space-y-4">
                {communityPosts.map(post => (
                  <div key={post.id} className="bg-galaxy-blue p-4 rounded-lg">
                    <div className="flex items-center space-x-2 mb-2">
                      <div className="w-8 h-8 bg-galaxy-dark rounded-full"></div>
                      <div>
                        <p className="font-semibold text-galaxy-light">{post.channel}</p>
                        <p className="text-xs text-galaxy-light opacity-80">{post.time}</p>
                      </div>
                    </div>
                    <img src={post.image} alt="Community Post" className="w-full rounded-lg mb-2" />
                    <p className="text-sm text-galaxy-light">{post.caption}</p>
                  </div>
                ))}
              </div>
            )}
          </div>
        </div>
      );
    };

    // Dashboard Page Component
    const DashboardPage = () => {
      const { user, videos, communityPosts, setChannelSettings, channelSettings } = useContext(AppContext);
      const [bannerFile, setBannerFile] = useState(null);
      const [logoFile, setLogoFile] = useState(null);
      const [channelName, setChannelName] = useState(channelSettings.channelName);
      const [youtubeLink, setYoutubeLink] = useState(channelSettings.youtubeLink);
      const [instagramLink, setInstagramLink] = useState(channelSettings.instagramLink);
      const [tiktokLink, setTiktokLink] = useState(channelSettings.tiktokLink);
      const [activeTab, setActiveTab] = useState('overview');
      const [analyticsFilter, setAnalyticsFilter] = useState('hours');

      if (!user) {
        return (
          <div className="pt-20 md:pl-64 p-4 text-center">
            <h2 className="text-xl font-bold text-galaxy-light">Bitte melde dich an, um das Dashboard zu sehen.</h2>
            <button
              onClick={() => window.location.hash = '#home'}
              className="mt-4 bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all"
            >
              Zum Login
            </button>
          </div>
        );
      }

      const handleSettingsSubmit = (e) => {
        e.preventDefault();
        const newSettings = { ...channelSettings };
        if (bannerFile) newSettings.banner = URL.createObjectURL(bannerFile);
        if (logoFile) newSettings.logo = URL.createObjectURL(logoFile);
        newSettings.channelName = channelName;
        newSettings.youtubeLink = youtubeLink;
        newSettings.instagramLink = instagramLink;
        newSettings.tiktokLink = tiktokLink;
        setChannelSettings(newSettings);
        setBannerFile(null);
        setLogoFile(null);
      };

      const totalViews = videos.reduce((sum, video) => sum + (parseInt(video.views) || 0), 0);
      const recentVideos = videos.slice(0, 3).map(video => ({
        title: video.title,
        views: parseInt(video.views) || 0,
        performance: Math.random() > 0.5 ? 'Good' : 'Average' // Mock performance
      }));

      const getAnalyticsData = () => {
        const now = Date.now();
        const filterMs = {
          hours: 24 * 60 * 60 * 1000,
          days: 7 * 24 * 60 * 60 * 1000,
          weeks: 4 * 7 * 24 * 60 * 60 * 1000
        }[analyticsFilter];

        const filteredVideos = videos.filter(video => now - video.analytics.timestamp <= filterMs);
        const filteredPosts = communityPosts.filter(post => now - post.analytics.timestamp <= filterMs);

        return {
          videoViews: filteredVideos.reduce((sum, video) => sum + video.analytics.views, 0),
          postViews: filteredPosts.reduce((sum, post) => sum + post.analytics.views, 0)
        };
      };

      const analyticsData = getAnalyticsData();
      const isMonetized = channelSettings.subscribers >= 1000 && channelSettings.watchtime >= 2000;

      return (
        <div className="pt-20 md:pl-64 p-4 max-w-5xl mx-auto">
          <h2 className="text-2xl font-bold mb-4 text-galaxy-light">Dashboard</h2>
          <div className="flex space-x-4 border-b border-galaxy-blue mb-4">
            <button 
              onClick={() => setActiveTab('overview')}
              className={`pb-2 ${activeTab === 'overview' ? 'border-b-2 border-galaxy-purple text-galaxy-light' : 'text-galaxy-light opacity-80'}`}
            >
              √úbersicht
            </button>
            <button 
              onClick={() => setActiveTab('content')}
              className={`pb-2 ${activeTab === 'content' ? 'border-b-2 border-galaxy-purple text-galaxy-light' : 'text-galaxy-light opacity-80'}`}
            >
              Inhalte
            </button>
            <button 
              onClick={() => setActiveTab('analytics')}
              className={`pb-2 ${activeTab === 'analytics' ? 'border-b-2 border-galaxy-purple text-galaxy-light' : 'text-galaxy-light opacity-80'}`}
            >
              Analytics
            </button>
            <button 
              onClick={() => setActiveTab('monetization')}
              className={`pb-2 ${activeTab === 'monetization' ? 'border-b-2 border-galaxy-purple text-galaxy-light' : 'text-galaxy-light opacity-80'}`}
            >
              Einnahmen
            </button>
            <button 
              onClick={() => setActiveTab('settings')}
              className={`pb-2 ${activeTab === 'settings' ? 'border-b-2 border-galaxy-purple text-galaxy-light' : 'text-galaxy-light opacity-80'}`}
            >
              Einstellungen
            </button>
          </div>

          {activeTab === 'overview' && (
            <div className="space-y-6">
              <div className="bg-galaxy-blue p-6 rounded-lg">
                <h3 className="text-lg font-semibold text-galaxy-light mb-2">Kanal√ºbersicht</h3>
                <p className="text-galaxy-light">Abonnenten: {channelSettings.subscribers.toLocaleString()}</p>
                <p className="text-galaxy-light">Gesamtaufrufe: {totalViews.toLocaleString()}</p>
              </div>
              <div className="bg-galaxy-blue p-6 rounded-lg">
                <h3 className="text-lg font-semibold text-galaxy-light mb-2">Video-Leistungsanalyse</h3>
                {recentVideos.map((video, i) => (
                  <div key={i} className="mb-2">
                    <p className="text-galaxy-light">{video.title}</p>
                    <p className="text-sm text-galaxy-light opacity-80">Aufrufe: {video.views.toLocaleString()} ‚Ä¢ Leistung: {video.performance}</p>
                  </div>
                ))}
              </div>
            </div>
          )}

          {activeTab === 'content' && (
            <div className="space-y-6">
              <div className="bg-galaxy-blue p-6 rounded-lg">
                <h3 className="text-lg font-semibold text-galaxy-light mb-2">Videos</h3>
                <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
                  {videos.map((video, i) => (
                    <VideoCard 
                      key={i} 
                      video={video} 
                      onLike={() => {}} 
                      onShare={() => {}} 
                      onAddToPlaylist={() => {}} 
                    />
                  ))}
                </div>
              </div>
              <div className="bg-galaxy-blue p-6 rounded-lg">
                <h3 className="text-lg font-semibold text-galaxy-light mb-2">Community Posts</h3>
                <div className="space-y-4">
                  {communityPosts.map(post => (
                    <div key={post.id} className="bg-galaxy-dark p-4 rounded-lg">
                      <div className="flex items-center space-x-2 mb-2">
                        <div className="w-8 h-8 bg-galaxy-blue rounded-full"></div>
                        <div>
                          <p className="font-semibold text-galaxy-light">{post.channel}</p>
                          <p className="text-xs text-galaxy-light opacity-80">{post.time}</p>
                        </div>
                      </div>
                      <img src={post.image} alt="Community Post" className="w-full rounded-lg mb-2" />
                      <p className="text-sm text-galaxy-light">{post.caption}</p>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {activeTab === 'analytics' && (
            <div className="bg-galaxy-blue p-6 rounded-lg">
              <h3 className="text-lg font-semibold text-galaxy-light mb-2">Analytics</h3>
              <div className="flex space-x-4 mb-4">
                <button 
                  onClick={() => setAnalyticsFilter('hours')} 
                  className={`px-4 py-2 rounded-full ${analyticsFilter === 'hours' ? 'bg-galaxy-gradient' : 'bg-galaxy-dark'} text-galaxy-light hover:bg-galaxy-purple transition-all`}
                >
                  Letzte Stunden
                </button>
                <button 
                  onClick={() => setAnalyticsFilter('days')} 
                  className={`px-4 py-2 rounded-full ${analyticsFilter === 'days' ? 'bg-galaxy-gradient' : 'bg-galaxy-dark'} text-galaxy-light hover:bg-galaxy-purple transition-all`}
                >
                  Letzte Tage
                </button>
                <button 
                  onClick={() => setAnalyticsFilter('weeks')} 
                  className={`px-4 py-2 rounded-full ${analyticsFilter === 'weeks' ? 'bg-galaxy-gradient' : 'bg-galaxy-dark'} text-galaxy-light hover:bg-galaxy-purple transition-all`}
                >
                  Letzte Wochen
                </button>
              </div>
              <p className="text-galaxy-light">Videoaufrufe: {analyticsData.videoViews.toLocaleString()}</p>
              <p className="text-galaxy-light">Beitragsaufrufe: {analyticsData.postViews.toLocaleString()}</p>
            </div>
          )}

          {activeTab === 'monetization' && (
            <div className="bg-galaxy-blue p-6 rounded-lg">
              <h3 className="text-lg font-semibold text-galaxy-light mb-2">Monetarisierung</h3>
              <p className="text-galaxy-light mb-2">Status: {isMonetized ? 'Aktiv' : 'Inaktiv'}</p>
              <p className="text-galaxy-light">Anforderungen:</p>
              <ul className="list-disc pl-5 text-galaxy-light">
                <li>Abonnenten: {channelSettings.subscribers.toLocaleString()} / 1,000 {channelSettings.subscribers >= 1000 ? '‚úì' : '‚úó'}</li>
                <li>Gesamte Watchtime: {channelSettings.watchtime.toLocaleString()} Stunden / 2,000 Stunden {channelSettings.watchtime >= 2000 ? '‚úì' : '‚úó'}</li>
              </ul>
              {!isMonetized && (
                <p className="text-galaxy-light mt-2">Erf√ºlle die Anforderungen, um Monetarisierung zu aktivieren.</p>
              )}
            </div>
          )}

          {activeTab === 'settings' && (
            <form onSubmit={handleSettingsSubmit} className="bg-galaxy-blue p-6 rounded-lg">
              <div className="mb-4">
                <label className="block text-sm mb-1 text-galaxy-light">Kanalname</label>
                <input
                  type="text"
                  value={channelName}
                  onChange={(e) => setChannelName(e.target.value)}
                  className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                />
              </div>
              <div className="mb-4">
                <label className="block text-sm mb-1 text-galaxy-light">Banner-Bild</label>
                <input
                  type="file"
                  accept="image/*"
                  onChange={(e) => setBannerFile(e.target.files[0])}
                  className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                />
                {bannerFile && (
                  <img src={URL.createObjectURL(bannerFile)} alt="Banner Preview" className="mt-2 w-full h-40 object-cover rounded-lg" />
                )}
              </div>
              <div className="mb-4">
                <label className="block text-sm mb-1 text-galaxy-light">Logo-Bild</label>
                <input
                  type="file"
                  accept="image/*"
                  onChange={(e) => setLogoFile(e.target.files[0])}
                  className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                />
                {logoFile && (
                  <img src={URL.createObjectURL(logoFile)} alt="Logo Preview" className="mt-2 w-20 h-20 rounded-full" />
                )}
              </div>
              <div className="mb-4">
                <label className="block text-sm mb-1 text-galaxy-light">YouTube Link</label>
                <input
                  type="url"
                  value={youtubeLink}
                  onChange={(e) => setYoutubeLink(e.target.value)}
                  className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                  placeholder="https://youtube.com/..."
                />
              </div>
              <div className="mb-4">
                <label className="block text-sm mb-1 text-galaxy-light">Instagram Link</label>
                <input
                  type="url"
                  value={instagramLink}
                  onChange={(e) => setInstagramLink(e.target.value)}
                  className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                  placeholder="https://instagram.com/..."
                />
              </div>
              <div className="mb-4">
                <label className="block text-sm mb-1 text-galaxy-light">TikTok Link</label>
                <input
                  type="url"
                  value={tiktokLink}
                  onChange={(e) => setTiktokLink(e.target.value)}
                  className="w-full bg-galaxy-dark p-2 rounded-lg text-galaxy-light transition-all duration-300"
                  placeholder="https://tiktok.com/..."
                />
              </div>
              <button
                type="submit"
                className="bg-galaxy-gradient text-galaxy-light px-4 py-2 rounded-full hover:opacity-80 transition-all"
              >
                Speichern
              </button>
            </form>
          )}
        </div>
      );
    };

    // Trends Page Component
    const TrendsPage = () => {
      const { videos, setLikedVideos, likedVideos, setNotifications } = useContext(AppContext);
      const categories = ['Trends', 'Music', 'Movies', 'Gaming', 'Sports', 'Knowledge', 'Podcasts'];
      const [activeCategory, setActiveCategory] = useState('Trends');

      const trendingVideos = videos.filter(video => {
        const views = parseInt(video.views) || 0;
        const likes = video.likes || 0;
        return likes >= 1000 || (views >= 10000 && views <= 100000);
      });

      const filteredVideos = activeCategory === 'Trends' 
        ? trendingVideos 
        : trendingVideos.filter(video => video.category === activeCategory);

      const handleLike = (video) => {
        setLikedVideos(prev => {
          if (prev.some(v => v.id === video.id)) {
            return prev.filter(v => v.id !== video.id);
          }
          return [...prev, { ...video, likes: (video.likes || 0) + 1 }];
        });
        setVideos(prev => prev.map(v => 
          v.id === video.id ? { ...v, likes: (v.likes || 0) + 1 } : v
        ));
      };

      const handleShare = (video) => {
        const shareUrl = `${window.location.origin}/#video/${video.id}`;
        const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(shareUrl)}`;
        navigator.clipboard.writeText(shareUrl);
        setNotifications(prev => [...prev, {
          id: Date.now(),
          message: `Link f√ºr "${video.title}" kopiert!`,
          time: new Date().toLocaleTimeString()
        }]);
        window.open(whatsappUrl, '_blank');
      };

      return (
        <div className="pt-20 md:pl-64 p-4">
          <h2 className="text-2xl font-bold mb-4 text-galaxy-light">Trends</h2>
          <div className="flex space-x-4 border-b border-galaxy-blue mb-4 overflow-x-auto">
            {categories.map(category => (
              <button
                key={category}
                onClick={() => setActiveCategory(category)}
                className={`pb-2 ${activeCategory === category ? 'border-b-2 border-galaxy-purple text-galaxy-light' : 'text-galaxy-light opacity-80'}`}
              >
                {category}
              </button>
            ))}
          </div>
          <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            {filteredVideos.map((video, i) => (
              <VideoCard 
                key={i} 
                video={video} 
                onLike={handleLike} 
                onShare={handleShare} 
                onAddToPlaylist={() => {}} 
              />
            ))}
          </div>
        </div>
      );
    };

    // Main App Component
    const App = () => {
      const [page, setPage] = useState('home');

      useEffect(() => {
        const handleHashChange = () => {
          const hash = window.location.hash.replace('#', '') || 'home';
          setPage(hash);
        };
        window.addEventListener('hashchange', handleHashChange);
        handleHashChange();
        return () => window.removeEventListener('hashchange', handleHashChange);
      }, []);

      return (
        <AppProvider>
          <div>
            <Navbar />
            <Sidebar />
            {page === 'home' && <Homepage />}
            {page === 'upload-video' && <UploadComponent type="video" />}
            {page === 'upload-post' && <UploadComponent type="post" />}
            {page === 'channel' && <ChannelPage />}
            {page === 'dashboard' && <DashboardPage />}
            {page === 'video' && <VideoPage />}
            {page === 'community' && <CommunityPage />}
            {page === 'trends' && <TrendsPage />}
          </div>
        </AppProvider>
      );
    };

    // Render App
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>